{
  "address": "0xC62BC92029A3D3A38696B05131bfFEEebbd42EC5",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "bytes32[]",
          "name": "proposalNames",
          "type": "bytes32[]"
        },
        {
          "internalType": "contract IMyToken",
          "name": "_tokenContract",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_targetBlockNumber",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "callerVoteCount",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "voter",
          "type": "address"
        }
      ],
      "name": "getVotePower",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "proposals",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "name",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "voteCount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "remainingVotePower",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "targetBlockNumber",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "tokenContract",
      "outputs": [
        {
          "internalType": "contract IMyToken",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "proposal",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "vote",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "votePowerSpent",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "winnerName",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "winnerName_",
          "type": "bytes32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "winningProposal",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "winningProposal_",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "transactionHash": "0xfd72f948ebff97538d10b91a06a4665af12a3c94c487dd2d7813f6655f7c881b",
  "receipt": {
    "to": null,
    "from": "0x2f101Ee67aa478Fccee6e27386462CfFf814Fcd1",
    "contractAddress": "0xC62BC92029A3D3A38696B05131bfFEEebbd42EC5",
    "transactionIndex": 207,
    "gasUsed": "508669",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0xa56eb4aac34fb71127d1a685b55fcb66298d889712386c11960421dd9d4092db",
    "transactionHash": "0xfd72f948ebff97538d10b91a06a4665af12a3c94c487dd2d7813f6655f7c881b",
    "logs": [],
    "blockNumber": 7144347,
    "cumulativeGasUsed": "9833944",
    "status": 1,
    "byzantium": true
  },
  "args": [
    [
      "0x70726f706f73616c310000000000000000000000000000000000000000000000",
      "0x70726f706f73616c320000000000000000000000000000000000000000000000",
      "0x70726f706f73616c330000000000000000000000000000000000000000000000"
    ],
    "0x70b7065094F38837bCF46DED11BAbCE6c24b2314",
    7144344
  ],
  "numDeployments": 2,
  "solcInputHash": "7929a578e7536e1123cd5770d0e93b29",
  "metadata": "{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"bytes32[]\",\"name\":\"proposalNames\",\"type\":\"bytes32[]\"},{\"internalType\":\"contract IMyToken\",\"name\":\"_tokenContract\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_targetBlockNumber\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"callerVoteCount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"voter\",\"type\":\"address\"}],\"name\":\"getVotePower\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"proposals\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"name\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"voteCount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"remainingVotePower\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"targetBlockNumber\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"tokenContract\",\"outputs\":[{\"internalType\":\"contract IMyToken\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"proposal\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"vote\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"votePowerSpent\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"winnerName\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"winnerName_\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"winningProposal\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"winningProposal_\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/Ballot.sol\":\"Ballot\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"contracts/Ballot.sol\":{\"content\":\"//SPDX-License-Identifier: GPL-3.0\\r\\npragma solidity >=0.7.0 <0.9.0;\\r\\n\\r\\ninterface IMyToken {\\r\\n    function getVotes(address) external view returns (uint256);\\r\\n    // function getPastVotes(address, uint256) external view returns (uint256);\\r\\n}\\r\\n\\r\\ncontract Ballot {\\r\\n    struct Proposal {\\r\\n        bytes32 name;\\r\\n        uint voteCount;\\r\\n    }\\r\\n\\r\\n    IMyToken public tokenContract;\\r\\n\\r\\n    Proposal[] public proposals;\\r\\n    uint256 public targetBlockNumber;\\r\\n\\r\\n    mapping(address => uint256) public votePowerSpent;\\r\\n    mapping(address => uint256) public remainingVotePower;\\r\\n    mapping(address => uint256) public callerVoteCount;\\r\\n\\r\\n    constructor(bytes32[] memory proposalNames, IMyToken _tokenContract, uint256 _targetBlockNumber) {\\r\\n        tokenContract = _tokenContract;\\r\\n        targetBlockNumber = _targetBlockNumber;\\r\\n        for (uint i = 0; i < proposalNames.length; i++) {\\r\\n            proposals.push(Proposal({\\r\\n                name: proposalNames[i],\\r\\n                voteCount: 0\\r\\n            }));\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function vote(uint proposal, uint256 amount) external {\\r\\n        uint256 votePower = getVotePower(msg.sender);\\r\\n        callerVoteCount[msg.sender] == 0? remainingVotePower[msg.sender] = votePower : remainingVotePower[msg.sender] = votePower - votePowerSpent[msg.sender];\\r\\n        require(remainingVotePower[msg.sender] >= amount, \\\"Error: Trying to vote more than available\\\");\\r\\n        votePowerSpent[msg.sender] += amount;\\r\\n        callerVoteCount[msg.sender]++;\\r\\n        proposals[proposal].voteCount += amount;\\r\\n    }\\r\\n\\r\\n    function getVotePower(address voter) public view returns(uint256){\\r\\n        // return tokenContract.getPastVotes(voter, targetBlockNumber);\\r\\n        return tokenContract.getVotes(voter);\\r\\n    }\\r\\n\\r\\n    function winningProposal() public view\\r\\n        returns (uint winningProposal_)\\r\\n    {\\r\\n        uint winningVoteCount = 0;\\r\\n        for (uint p = 0; p < proposals.length; p++) {\\r\\n            if (proposals[p].voteCount > winningVoteCount) {\\r\\n                winningVoteCount = proposals[p].voteCount;\\r\\n                winningProposal_ = p;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function winnerName() external view\\r\\n        returns (bytes32 winnerName_)\\r\\n    {\\r\\n        winnerName_ = proposals[winningProposal()].name;\\r\\n    }\\r\\n}\",\"keccak256\":\"0x58afc0f777d9f8e4e52d8fd1c7f82796dc97ba50bb0cf8bca709de4d46bd5941\",\"license\":\"GPL-3.0\"}},\"version\":1}",
  "bytecode": "0x608060405234801561001057600080fd5b506040516107a43803806107a483398101604081905261002f916100fe565b600080546001600160a01b0319166001600160a01b03841617815560028290555b83518110156100c35760016040518060400160405280868481518110610078576100786101d6565b602090810291909101810151825260009181018290528354600181810186559483529181902083516002909302019182559190910151910155806100bb816101ec565b915050610050565b50505050610213565b634e487b7160e01b600052604160045260246000fd5b80516001600160a01b03811681146100f957600080fd5b919050565b60008060006060848603121561011357600080fd5b83516001600160401b038082111561012a57600080fd5b818601915086601f83011261013e57600080fd5b8151602082821115610152576101526100cc565b8160051b604051601f19603f83011681018181108682111715610177576101776100cc565b60405292835281830193508481018201928a84111561019557600080fd5b948201945b838610156101b35785518552948201949382019361019a565b97506101c290508882016100e2565b955050505050604084015190509250925092565b634e487b7160e01b600052603260045260246000fd5b60006001820161020c57634e487b7160e01b600052601160045260246000fd5b5060010190565b610582806102226000396000f3fe608060405234801561001057600080fd5b506004361061009e5760003560e01c8063609ff1bd11610066578063609ff1bd146101525780639e90d0d91461015a578063b384abef1461017a578063bb9c09201461018f578063e2ba53f0146101a257600080fd5b8063013cf08b146100a35780630c019a04146100d0578063220d5e52146100fe5780632a8cd29e1461011e57806355a373d614610127575b600080fd5b6100b66100b136600461045d565b6101aa565b604080519283526020830191909152015b60405180910390f35b6100f06100de366004610476565b60056020526000908152604090205481565b6040519081526020016100c7565b6100f061010c366004610476565b60046020526000908152604090205481565b6100f060025481565b60005461013a906001600160a01b031681565b6040516001600160a01b0390911681526020016100c7565b6100f06101d8565b6100f0610168366004610476565b60036020526000908152604090205481565b61018d6101883660046104a6565b610255565b005b6100f061019d366004610476565b6103b5565b6100f061042a565b600181815481106101ba57600080fd5b60009182526020909120600290910201805460019091015490915082565b600080805b6001548110156102505781600182815481106101fb576101fb6104c8565b906000526020600020906002020160010154111561023e5760018181548110610226576102266104c8565b90600052602060002090600202016001015491508092505b80610248816104f4565b9150506101dd565b505090565b6000610260336103b5565b33600090815260056020526040902054909150156102a95733600090815260036020526040902054610292908261050d565b3360009081526004602052604090208190556102bd565b336000908152600460205260409020819055805b50336000908152600460205260409020548211156103335760405162461bcd60e51b815260206004820152602960248201527f4572726f723a20547279696e6720746f20766f7465206d6f7265207468616e20604482015268617661696c61626c6560b81b606482015260840160405180910390fd5b3360009081526003602052604081208054849290610352908490610520565b9091555050336000908152600560205260408120805491610372836104f4565b9190505550816001848154811061038b5761038b6104c8565b906000526020600020906002020160010160008282546103ab9190610520565b9091555050505050565b600080546040516309ab24eb60e41b81526001600160a01b03848116600483015290911690639ab24eb090602401602060405180830381865afa158015610400573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104249190610533565b92915050565b600060016104366101d8565b81548110610446576104466104c8565b906000526020600020906002020160000154905090565b60006020828403121561046f57600080fd5b5035919050565b60006020828403121561048857600080fd5b81356001600160a01b038116811461049f57600080fd5b9392505050565b600080604083850312156104b957600080fd5b50508035926020909101359150565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b600060018201610506576105066104de565b5060010190565b81810381811115610424576104246104de565b80820180821115610424576104246104de565b60006020828403121561054557600080fd5b505191905056fea2646970667358221220d96f857ec0df896d406f768a85d1167f278f56a1275a03e7457efd3a2c733dc464736f6c63430008140033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b506004361061009e5760003560e01c8063609ff1bd11610066578063609ff1bd146101525780639e90d0d91461015a578063b384abef1461017a578063bb9c09201461018f578063e2ba53f0146101a257600080fd5b8063013cf08b146100a35780630c019a04146100d0578063220d5e52146100fe5780632a8cd29e1461011e57806355a373d614610127575b600080fd5b6100b66100b136600461045d565b6101aa565b604080519283526020830191909152015b60405180910390f35b6100f06100de366004610476565b60056020526000908152604090205481565b6040519081526020016100c7565b6100f061010c366004610476565b60046020526000908152604090205481565b6100f060025481565b60005461013a906001600160a01b031681565b6040516001600160a01b0390911681526020016100c7565b6100f06101d8565b6100f0610168366004610476565b60036020526000908152604090205481565b61018d6101883660046104a6565b610255565b005b6100f061019d366004610476565b6103b5565b6100f061042a565b600181815481106101ba57600080fd5b60009182526020909120600290910201805460019091015490915082565b600080805b6001548110156102505781600182815481106101fb576101fb6104c8565b906000526020600020906002020160010154111561023e5760018181548110610226576102266104c8565b90600052602060002090600202016001015491508092505b80610248816104f4565b9150506101dd565b505090565b6000610260336103b5565b33600090815260056020526040902054909150156102a95733600090815260036020526040902054610292908261050d565b3360009081526004602052604090208190556102bd565b336000908152600460205260409020819055805b50336000908152600460205260409020548211156103335760405162461bcd60e51b815260206004820152602960248201527f4572726f723a20547279696e6720746f20766f7465206d6f7265207468616e20604482015268617661696c61626c6560b81b606482015260840160405180910390fd5b3360009081526003602052604081208054849290610352908490610520565b9091555050336000908152600560205260408120805491610372836104f4565b9190505550816001848154811061038b5761038b6104c8565b906000526020600020906002020160010160008282546103ab9190610520565b9091555050505050565b600080546040516309ab24eb60e41b81526001600160a01b03848116600483015290911690639ab24eb090602401602060405180830381865afa158015610400573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104249190610533565b92915050565b600060016104366101d8565b81548110610446576104466104c8565b906000526020600020906002020160000154905090565b60006020828403121561046f57600080fd5b5035919050565b60006020828403121561048857600080fd5b81356001600160a01b038116811461049f57600080fd5b9392505050565b600080604083850312156104b957600080fd5b50508035926020909101359150565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b600060018201610506576105066104de565b5060010190565b81810381811115610424576104246104de565b80820180821115610424576104246104de565b60006020828403121561054557600080fd5b505191905056fea2646970667358221220d96f857ec0df896d406f768a85d1167f278f56a1275a03e7457efd3a2c733dc464736f6c63430008140033",
  "devdoc": {
    "kind": "dev",
    "methods": {},
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {},
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 8281,
        "contract": "contracts/Ballot.sol:Ballot",
        "label": "tokenContract",
        "offset": 0,
        "slot": "0",
        "type": "t_contract(IMyToken)8273"
      },
      {
        "astId": 8285,
        "contract": "contracts/Ballot.sol:Ballot",
        "label": "proposals",
        "offset": 0,
        "slot": "1",
        "type": "t_array(t_struct(Proposal)8278_storage)dyn_storage"
      },
      {
        "astId": 8287,
        "contract": "contracts/Ballot.sol:Ballot",
        "label": "targetBlockNumber",
        "offset": 0,
        "slot": "2",
        "type": "t_uint256"
      },
      {
        "astId": 8291,
        "contract": "contracts/Ballot.sol:Ballot",
        "label": "votePowerSpent",
        "offset": 0,
        "slot": "3",
        "type": "t_mapping(t_address,t_uint256)"
      },
      {
        "astId": 8295,
        "contract": "contracts/Ballot.sol:Ballot",
        "label": "remainingVotePower",
        "offset": 0,
        "slot": "4",
        "type": "t_mapping(t_address,t_uint256)"
      },
      {
        "astId": 8299,
        "contract": "contracts/Ballot.sol:Ballot",
        "label": "callerVoteCount",
        "offset": 0,
        "slot": "5",
        "type": "t_mapping(t_address,t_uint256)"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_array(t_struct(Proposal)8278_storage)dyn_storage": {
        "base": "t_struct(Proposal)8278_storage",
        "encoding": "dynamic_array",
        "label": "struct Ballot.Proposal[]",
        "numberOfBytes": "32"
      },
      "t_bytes32": {
        "encoding": "inplace",
        "label": "bytes32",
        "numberOfBytes": "32"
      },
      "t_contract(IMyToken)8273": {
        "encoding": "inplace",
        "label": "contract IMyToken",
        "numberOfBytes": "20"
      },
      "t_mapping(t_address,t_uint256)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => uint256)",
        "numberOfBytes": "32",
        "value": "t_uint256"
      },
      "t_struct(Proposal)8278_storage": {
        "encoding": "inplace",
        "label": "struct Ballot.Proposal",
        "members": [
          {
            "astId": 8275,
            "contract": "contracts/Ballot.sol:Ballot",
            "label": "name",
            "offset": 0,
            "slot": "0",
            "type": "t_bytes32"
          },
          {
            "astId": 8277,
            "contract": "contracts/Ballot.sol:Ballot",
            "label": "voteCount",
            "offset": 0,
            "slot": "1",
            "type": "t_uint256"
          }
        ],
        "numberOfBytes": "64"
      },
      "t_uint256": {
        "encoding": "inplace",
        "label": "uint256",
        "numberOfBytes": "32"
      }
    }
  }
}